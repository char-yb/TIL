# 인덱스란?

데이터베이스에서 table의 검색 성능을 높여주는 대표적인 방법으로 B+Tree 구조로 된 index를 사용하여 검색 속도를 향상시킨다.
index는 책마다 마지막 페이지에 있는 색인(index)과 같은 역할을 하는 자료구조이다. 책처럼 어떠한 용어나 구문을 찾기 위해 첫 페이지부터 마지막 페이지까지 full-scan할 필요없이 몇페이지로 바로 찾을 수 있는 책갈피같은 역할을 수행한다.

<aside>
💡 index가 왜 필요하고 어느 상황에서 필요한 지 많이 물어보는데 구조와 장단점을 서술하고 초점을 맞춰서 활용도를 말하면 된다.
</aside>

index를 생성하게 되면 특정 column의 값을 기준으로 정렬하여 데이터의 물리적 위치와 함께 별로 파일에 저장한다.

### index를 사용하는 이유는?

table에 데이터를 지속적으로 저장하게 되면 내부적으로 순서없이 쌓이게 된다. 이 경우에 특정 조건을 만족하는 데이터를 찾고자 where절을 사용한다면 table의 row를 처음부터 끝까지 모두 접근하여 검색조건과 일치하는지 비교하는 과정이 필요하다. 하지만 특정 column에 대한 index를 생성해 놓은 경우 해당 속성에 대하여 search-key가 정렬되어 저장되어 있기 때문에 조건 검색(SELECT-WHERE) 속도가 갱장히 빠르다.

### 클러스터형 인덱스와 보조 인덱스

clustering index: 특정 column을 기본키로 지정하면 자동으로 클러스터형 인덱스가 생성되고, 해당 column 기준으로 정렬이 된다. Table 자체가 정렬된 하나의 index인 것이다. 마치 영어사전처럼 책의 내용 자체가 정렬된 것을 떠올리면 된다.

secondary index: 일반 책의 찾아보기와 같이 별도의 공간에 인덱스가 생성된다. create index… 와 같이 index를 생성하거나 고유키를 지정하면 보조 인덱스가 생성된다.

### INDEX의 장단점

index의 최대 장점은 검색(SELECT-WHERE)속도 향상이다. 테이블을 만들고 안에 데이터가 쌓이게 되면 테이블의 record는 내부적으로 순서없이 저장이 된다.

WHERE절을 통해 특정 조건에 맞는 데이터들을 찾아낼 때에도 record의 처음부터 끝까지 다 읽어서 검색 조건과 맞는지 비교해야 한다. 반면 index를 생성하면 index에는 데이터들이 정렬되어 저장되어 있기 때문에 검색 조건에 일치하는 데이터들을 빠르게 찾아낼 수 있다.

INDEX의 단점으로 크게 두 가지가 존재한다.

1. 추가 저장공간 필요
index를 생성하면 index 자료구조를 위한 저장 공간이 추가 필요하다. 약 table의 10%정도의 공간을 차지한다.
2. 느린 데이터 변경 작업
검색이 아닌 데이터를 변경할 때, 즉 INSERT, UPDATE, DELETE가 자주 발생하면 오히려 성능이 나빠질 수 있다. B+TREE 구조의 index는 데이터가 추가 삭제될 때마다 tree의 구조가 변경될 수 있기 때문이다. 즉 인덱스의 재구성이 필요하기 때문에 추가적인 자원이 소모된다.


### INDEX의 내부 동작은 어떻게 동작하나요?

Index의 대부분 B+Tree 자료구조로 이루어져 있어, WHERE 조건과 일치하는 데이터들의 저장위치를 훨씬 빠르게 찾을 수 있다.

### INDEX를 많이 생성하면 안되나요?

index를 생성하면 조건 검색 성능이 향상되겠지만, 하지만 추가 저장공간이 필요하고, 데이터를 추가/수정/삭제를 할 때마다 관련 index를 모두 수정해줘야 하기에 추가적으로 소요될 수도 있다. 따라서 추가 저장공간과 데이터 업데이트 시 소요되는 추가 시간등을 복합적으로 고려하여 조건 검색의 성능향상이 더 큰 이득이 된다고 판단되는 column에만 index를 생성하는 것이 좋다.